# Datasets

Three datasets are provided with this benchmark. The details of each individual
dataset are given in the table below. 


| Dataset | EMPIAR ID    | Size (TB) | Description                                                                                                                                      |
|---------|--------------|-----------|--------------------------------------------------------------------------------------------------------------------------------------------------|
| RELION tutorial | n/a | 0.08 | Small dataset from the Relion tutorial for rapid testing of setup. |
| Rabbit muscle aldolase  | 10338          | 1.4      | Rabbit muscle aldolase movies obtained using a Talos Arctica (200 kV) equipped with a K2. More details on [EMPIAR](https://www.ebi.ac.uk/pdbe/emdb/empiar/entry/10338/)      |

# Flowcharts

The PDFs in this directory show the pipeline flowcharts, as generated by Relion. Look in particular at page 2, where I have added some more annotation. The coloured boxes indicate individual jobs appropriate for benchmarking.

Note that the aldolase dataset requires a more complicated workflow than the simple tutorial dataset, and so there are multiple Refine3D jobs. 

# Layout of each dataset

Each dataset contains the following:

- Most files are from a completed Relion project. These give the necessary input data for benchmarking runs.
These files are related to the jobs shown in the accompanying flowcharts. For the tutorial dataset, for example, subdirectory Refine3D/job028 contains most input and output files for the Refine3D job highlighted in red in the flowchart. Some input datafiles are in the subdirectory of the job which previously created them, and this is represented by arrows in the flowchart.
- The JobFiles subdirectory contains job control files in .star format for running the benchmarking jobs. Most parameters should be left untouched, as appropriate for the benchmark. Parameters in the Running section should be adjusted to specify the number of MPI tasks, threads, etc. Parameters in the Compute section could be adjusted to tune the job.
- The file slurm_template.sh is referenced from the job files, and provides a template for cluster submission.
- The script benchmark_runs.py is the main way of running the benchmarks. Select the benchmark of interest by editing at the top of the script, and run. The script assumes that Relion and the python API are on the PATH / PYTHONPATH, and we will supply containerised versions.
